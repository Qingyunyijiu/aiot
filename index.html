<!DOCTYPE html>
<html>
<head>
  <title>温度监测6</title>
</head>
<body>
  <h1>温度监测</h1>
  
  <p>设备ID: <span id="deviceId"></span></p>
  
  <p>当前温度: <span id="temperature"></span>°C</p>

  <script>
    const API_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5qYmhnZ210dnRva3B6cnR2a29vIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTEwMzM4OTAsImV4cCI6MjAwNjYwOTg5MH0.05P3Bf39piFA3cW3x9ufeoqGMJUCN-gvfCVVrq1w-ac';
    const DEVICE_ID = 'temp_201'; 
    const SUPABASE_URL = 'https://njbhggmtvtokpzrtvkoo.supabase.co';

    document.getElementById('deviceId').innerText = DEVICE_ID;

async function getLatestTemperature() {
  const res = await fetch(`${SUPABASE_URL}/rest/v1/temperature?device_id=eq.${DEVICE_ID}&apikey=${API_KEY}&order=created_at.desc`);
  const data = await res.json();
  return data[0].value;
}

    setInterval(async () => {
      const temp = await getLatestTemperature();
      document.getElementById('temperature').innerText = temp;
    }, 5000);
  </script>

</body>
</html>
