<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Temperature Monitor</title>
</head>

<body>

<h1>实时温度监测V222</h1>

<div id="temperatures"></div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
const supabaseUrl = 'https://njbhggmtvtokpzrtvkoo.supabase.co';
const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im5qYmhnZ210dnRva3B6cnR2a29vIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTEwMzM4OTAsImV4cCI6MjAwNjYwOTg5MH0.05P3Bf39piFA3cW3x9ufeoqGMJUCN-gvfCVVrq1w-ac';
const supabase = supabase.createClient(supabaseUrl, supabaseKey);

async function getTemperatures() {
  let { data } = await supabase
    .from('temperatures')
    .select();
  return data; 
}

async function displayTemperatures() {
  let temperatures = await getTemperatures(); 

  let html = '';
  temperatures.forEach(temp => {
    html += `<div>${temp.created_at}: ${temp.temp}°C</div>`;
  });

  document.getElementById('temperatures').innerHTML = html;
}

displayTemperatures();

setInterval(displayTemperatures, 10000);

</script>

</body>
</html>
